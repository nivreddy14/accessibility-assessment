{
	"info": {
		"_postman_id": "3457f4d5-6eeb-43cb-a060-584ff5182a3f",
		"name": "Accessibility Assessment Tests",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Get service status",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://localhost:6010/api/status",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "6010",
					"path": [
						"api",
						"status"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get URL Logs",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://localhost:6010/api/logs/urls",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "6010",
					"path": [
						"api",
						"logs",
						"urls"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get service logs",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://localhost:6010/api/logs/app",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "6010",
					"path": [
						"api",
						"logs",
						"app"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get report bundle",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://localhost:6010/api/report/bundle",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "6010",
					"path": [
						"api",
						"report",
						"bundle"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get report json",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "7c4d5757-c637-4e9d-9f16-2133a7054b08",
						"exec": [
							"template = `",
							"<html>",
							"",
							"<head>",
							"    <script src=\"https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js\"></script>",
							"    <script src=\"https://cdn.datatables.net/v/bs4/dt-1.10.18/datatables.min.js\"></script>",
							"    <script src=\"https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js\"></script>",
							"    <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\">",
							"    <link rel=\"stylesheet\" href=\"https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css\">",
							"    <style type=\"text/css\">",
							"        img {",
							"            width: 100px;",
							"            height: 75px;",
							"        }",
							"        ",
							"        body {",
							"            padding-top: 50px;",
							"            background: #f8f9fa;",
							"        }",
							"    </style>",
							"</head>",
							"",
							"<body>",
							"    <div class=\"container\">",
							"        <h1>Accessibility Report</h1> {{#with response}}",
							"",
							"        <p><strong>Test Suite:</strong> {{testSuite}}",
							"            <br><strong>Build No:</strong> {{buildNo}}",
							"            <br><strong>Build URL:</strong> <a href=\"{{buildUrl}}\" target=\"_blank\">{{buildUrl}}</a></p>",
							"",
							"        <div class=\"row\">",
							"            {{#each tools}}",
							"",
							"            <div class=\"col-sm\">",
							"                <div class=\"jumbotron\">",
							"                    <h1 class=\"display-4\">{{name}}</h1>",
							"                    <p class=\"lead\"><span class=\"badge badge-primary\">Version {{version}}</span></p>",
							"                    <p><strong>Tool Type:</strong> {{toolType}}</span>",
							"                    </p>",
							"",
							"                    <hr class=\"my-4\">\\",
							"                    <h3>Summary</h3>",
							"                    <p><strong>Page Count:</strong> {{summary/pageCount}}",
							"                        <br><strong>Violation Count:</strong> {{summary/violationCount}}",
							"                        <br><strong>Error Count:</strong> {{summary/errorCount}}",
							"                        <br><strong>Informational Count:</strong> {{summary/informationalCount}}",
							"                    </p>",
							"                </div>",
							"",
							"            </div>",
							"",
							"            {{/each}}",
							"        </div>",
							"",
							"        {{/with}}",
							"        <hr>",
							"        <h1>Violations</h1>",
							"        <hr>",
							"        <table id=\"myTable\" class=\"display table-hover\" style=\"width:100%\">",
							"            <thead class=\"thead-dark\">",
							"                <tr class=\"text-center\">",
							"                    <th>Tool</th>",
							"                    <th>Test Suite</th>",
							"                    <th>Path</th>",
							"                    <th>CapturedPage</th>",
							"                    <th>Description</th>",
							"                    <th>Snippet</th>",
							"                    <th>Help Url</th>",
							"                </tr>",
							"            </thead>",
							"            <tbody>",
							"                {{#with response}} {{#each tools}} {{#each paths}}{{#each pages}}{{#each violations}}",
							"                <tr class=\"alert alert-{{{severity}}}\" title=\"Severity:{{severity}}, Alert Level:{{alertLevel}}\">",
							"                    <td>{{tool}}</td>",
							"                    <td>{{testSuite}}</td>",
							"                    <td>{{path}}</td>",
							"                    <td>{{capturedPage}}</td>",
							"                    <td>{{description}}</td>",
							"                    <td>{{snippet}}</td>",
							"                    <td>{{helpUrl}}</td>",
							"                </tr>",
							"                {{/each}} {{/each}} {{/each}} {{/each}} {{/with}}",
							"            </tbody>",
							"        </table>",
							"        </div>",
							"</body>",
							"",
							"</html>",
							"<script>",
							"    $(document).ready(function() {",
							"        $('#myTable').DataTable({",
							"            pageLength: 15,",
							"            dom: 'ipf',",
							"            fixedColumns: false,",
							"            columnDefs: [{",
							"                targets: [0, 2, 3, 4, 5, 6, 7, 8, 9],",
							"                searchable: false",
							"            }]",
							"        });",
							"    });",
							"</script>",
							"`; pm.visualizer.set(template, { response: pm.response.json() });"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://localhost:6010/api/report/json",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "6010",
					"path": [
						"api",
						"report",
						"json"
					]
				}
			},
			"response": []
		},
		{
			"name": "Initialise App",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"testSuite\": \"awesome-tests-a11y-tests\",\n    \"buildUrl\": \"https://build.tax.service.gov.uk/job/ACE/job/awesome-tests-a11y-tests/19/\"\n}"
				},
				"url": {
					"raw": "http://localhost:6010/api/app/initialise",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "6010",
					"path": [
						"api",
						"app",
						"initialise"
					]
				}
			},
			"response": []
		},
		{
			"name": "Load global-filters configuration",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded"
					}
				],
				"body": {
					"mode": "formdata",
					"formdata": [
						{
							"key": "filter",
							"type": "file",
							"src": []
						}
					]
				},
				"url": {
					"raw": "http://localhost:6010/api/app/global-filters",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "6010",
					"path": [
						"api",
						"app",
						"global-filters"
					]
				}
			},
			"response": []
		},
		{
			"name": "Initialise App (with error)",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"testSuite\": \"\",\n    \"buildUrl\": \"\"\n}"
				},
				"url": {
					"raw": "http://localhost:6010/api/app/initialise",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "6010",
					"path": [
						"api",
						"app",
						"initialise"
					]
				}
			},
			"response": []
		},
		{
			"name": "Reset the application",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"testSuite\": \"awesome-tests-a11y-tests\",\n    \"buildUrl\": \"https://build.tax.service.gov.uk/job/ACE/job/awesome-tests-a11y-tests/19/\"\n}"
				},
				"url": {
					"raw": "http://localhost:6010/api/app/reset",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "6010",
					"path": [
						"api",
						"app",
						"reset"
					]
				}
			},
			"response": []
		},
		{
			"name": "Page Capture (Simple)",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"pageURL\": \"http://localhost:1234/simple/page/capture\",\n    \"pageHTML\": \"<html><head><title>Some title</title></head><main>The contents of the page</main></html>\",\n    \"timestamp\": \"0000000002\",\n    \"files\": { \"file1\": \"some contents\" } \n}"
				},
				"url": {
					"raw": "http://localhost:6010/api/capture-page",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "6010",
					"path": [
						"api",
						"capture-page"
					]
				}
			},
			"response": []
		},
		{
			"name": "Page Capture Excluded",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"pageURL\": \"http://localhost:1234/test-only/page/capture\",\n    \"pageHTML\": \"<html><head><title>Some title</title></head><main>The contents of the page</main></html>\",\n    \"timestamp\": \"0000000002\",\n    \"files\": {\"file1\":\"some contents\"} \n}"
				},
				"url": {
					"raw": "http://localhost:6010/api/capture-page",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "6010",
					"path": [
						"api",
						"capture-page"
					]
				}
			},
			"response": []
		},
		{
			"name": "Page Capture With Error",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"pageURL\": \"http://localhost:1234/path/to/page/with/errors\",\n    \"pageHTML\": \"<html><head><title>Some title</title></head><main>The contents of the page</main></html>\",\n    \"timestamp\": \"0000000002\",\n    \"files\": {\"file1\":\"some contents\"},\n    \"errors\":  [ { \"failedUrl\": \"/pay/assets/js/monitoring.ga-events.js\",\n    \t\t\t\t\"message\": \"Request to the URL failed to return a 2XX response\",\n    \t\t\t\t\"statusReceived\": 404 } ]\n}"
				},
				"url": {
					"raw": "http://localhost:6010/api/capture-page",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "6010",
					"path": [
						"api",
						"capture-page"
					]
				}
			},
			"response": []
		},
		{
			"name": "Page Capture With Error (Multiple)",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"pageURL\": \"http://localhost:1234/path/to/page/with/lots/of/errors\",\n    \"pageHTML\": \"<html><head><title>Some title</title></head><main>The contents of the page</main></html>\",\n    \"timestamp\": \"0000000002\",\n    \"files\": {\"file1\":\"some contents\"},\n    \"errors\":  [ { \"failedUrl\": \"/pay/assets/js/monitoring.ga-events.js\",\n    \t\t\t\t\"message\": \"Request to the URL failed to return a 2XX response\",\n    \t\t\t\t\"statusReceived\": 404 },\n    \t\t\t\t{ \"failedUrl\": \"/pay/assets/js/another.js\",\n    \t\t\t\t\"message\": \"Request to the URL failed to return a 2XX response\",\n    \t\t\t\t\"statusReceived\": 404 }]\n}"
				},
				"url": {
					"raw": "http://localhost:6010/api/capture-page",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "6010",
					"path": [
						"api",
						"capture-page"
					]
				}
			},
			"response": []
		},
		{
			"name": "Trigger Assessment",
			"request": {
				"method": "POST",
				"header": [],
				"url": {
					"raw": "http://localhost:6010/api/assess-pages",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "6010",
					"path": [
						"api",
						"assess-pages"
					]
				}
			},
			"response": []
		}
	],
	"protocolProfileBehavior": {}
}